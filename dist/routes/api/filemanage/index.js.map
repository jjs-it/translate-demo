{"version":3,"sources":["../../../../src/routes/api/filemanage/index.js"],"names":["express","require","route","multer","fs","fileName","storage","diskStorage","destination","req","file","cb","targetDir","UploadPath","baseDir","existsSync","mkdirSync","filename","Date","now","originalname","post","single","get","module","exports"],"mappings":";;AAKA;;;;;;AALA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,QAAQF,SAAd;AACA,IAAMG,SAASF,QAAQ,QAAR,CAAf;AACA,IAAMG,KAAKH,QAAQ,IAAR,CAAX;;AAGA,IAAII,WAAW,EAAf;;AAEA,IAAIC,UAAUH,OAAOI,WAAP,CAAmB;AAC/BC,eAAa,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACpC,QAAIC,YAAYC,eAAWC,OAA3B;AACA,QAAI,CAACV,GAAGW,UAAH,CAAcH,SAAd,CAAL,EAA+B;AAC7BR,SAAGY,SAAH,CAAaJ,SAAb;AACD;AACDD,OAAG,IAAH,EAASC,SAAT;AACD,GAP8B;AAQ/BK,YAAU,kBAAUR,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjCN,eAAWa,KAAKC,GAAL,KAAa,GAAb,GAAmBT,KAAKU,YAAnC;AACAT,OAAG,IAAH,EAASN,QAAT;AACD;AAX8B,CAAnB,CAAd;;AAcAH,MAAMmB,IAAN,CAAW,GAAX,EAAgBlB,OAAO,EAAEG,SAASA,OAAX,EAAP,EAA6BgB,MAA7B,CAAoC,MAApC,CAAhB,EAA6DrB,QAAQ,UAAR,CAA7D;AACAC,MAAMqB,GAAN,CAAU,cAAV,EAA0BtB,QAAQ,YAAR,CAA1B;AACAuB,OAAOC,OAAP,GAAiBvB,KAAjB","file":"index.js","sourcesContent":["const express = require('express');\r\nconst route = express();\r\nconst multer = require('multer');\r\nconst fs = require('fs');\r\n\r\nimport UploadPath from '../../../constants/path.constant';\r\nlet fileName = '';\r\n\r\nlet storage = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    var targetDir = UploadPath.baseDir\r\n    if (!fs.existsSync(targetDir)) {\r\n      fs.mkdirSync(targetDir)\r\n    }\r\n    cb(null, targetDir)\r\n  },\r\n  filename: function (req, file, cb) {\r\n    fileName = Date.now() + '_' + file.originalname\r\n    cb(null, fileName)\r\n  }\r\n})\r\n\r\nroute.post('/', multer({ storage: storage }).single('file'), require('./upload'))\r\nroute.get('/:identifier', require('./download'));\r\nmodule.exports = route;"]}